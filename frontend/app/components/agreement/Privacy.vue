<template>
    <div class="pb-12 px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 text-center">
            KU-Work Privacy Policy
        </h1>
        <p class="text-sm text-gray-500 dark:text-gray-400 text-center mb-8">
            Last Updated: November 17, 2025
        </p>

        <!-- 1. Introduction -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                1. Introduction
            </h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                This Privacy Notice explains how we collect, use, disclose, and safeguard your
                information when you use our services. This notice applies to all users of our
                Platform, including:
            </p>
            <ul class="list-disc list-inside text-gray-700 dark:text-gray-300 ml-4 mb-4 space-y-2">
                <li>
                    <strong>Viewers:</strong> Individuals who browse the Platform without a verified
                    student account. They may only view job listings and company profiles.
                </li>
                <li>
                    <strong>Students:</strong> Verified Individuals seeking employment or internship
                    opportunities.
                </li>
                <li>
                    <strong>Companies:</strong> Organizations posting job opportunities or seeking
                    candidates.
                </li>
            </ul>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed font-semibold">
                By accessing or using our Platform, you signify that you have read, understood, and
                agree to our collection, storage, use, and disclosure of your personal information
                as described in this Privacy Notice.
            </p>
        </section>

        <!-- 2. Personal Data We Collect -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                2. Personal Data We Collect
            </h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                "Personal Data" means any information that can be used to identify you directly or
                indirectly. We collect different types of data depending on your user type:
            </p>
            <ul class="list-disc list-inside text-gray-700 dark:text-gray-300 ml-4 mb-4 space-y-2">
                <li>
                    <strong>All Users:</strong> We may collect technical data such as IP address,
                    browser type, and usage data when you interact with our Platform.
                </li>
                <li>
                    <strong>Students:</strong> We may collect your name, email address, phone
                    number, educational history, Student ID, resume/CV details, profile picture,and
                    any documents or information you provide for verification We may also collect
                    information you voluntarily provide for your public profile, such as an "About
                    Me" description and links to external sites (e.g., LinkedIn, GitHub).
                </li>
                <li>
                    <strong>Companies:</strong> We may collect your company name, business email
                    address, phone number, official website, profile picture, profile banner,and
                    details related to job postings. We may also collect information you voluntirily
                    provide for your public profile, such as "About Us" decription
                </li>
            </ul>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                We do not knowingly collect "Sensitive Personal Data" (e.g., racial or ethnic
                origin, political opinions, religious beliefs) unless you voluntarily provide it,
                for example, in your resume.
            </p>
        </section>

        <!-- 3. Purposes of Processing Personal Data -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                3. Purposes for Using Your Data
            </h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                We use your Personal Data for the following purposes, based on a lawful basis for
                processing:
            </p>
            <ul class="list-disc list-inside text-gray-700 dark:text-gray-300 ml-4 mb-4 space-y-2">
                <li>
                    <strong>To Provide and Manage the Service:</strong> To create and manage your
                    account, process job applications, display job postings, and facilitate
                    communication between Students and Companies (Basis: Performance of a Contract).
                </li>
                <li>
                    <strong>For AI-Driven Features:</strong> We may use your data for AI-driven
                    decision-making to enhance our services. This includes, but is not limited to:
                    <ul class="list-circle list-inside ml-6 mt-2 space-y-1">
                        <li>Verifying Student profiles and credentials.</li>
                        <li>Analyzing job post content for clarity and effectiveness.</li>
                    </ul>
                    (Basis: Legitimate Interest / Performance of a Contract).
                </li>
                <li>
                    <strong>To Improve Our Platform:</strong> To understand how users interact with
                    our Platform so we can improve its functionality and user experience (Basis:
                    Legitimate Interest).
                </li>
                <li>
                    <strong>For Security:</strong> To monitor for and prevent fraudulent or illegal
                    activity and to ensure the security of our Platform (Basis: Legitimate
                    Interest).
                </li>
                <li>
                    <strong>To Comply with Legal Obligations:</strong> To comply with applicable
                    laws, regulations, or legal processes (Basis: Legal Obligation).
                </li>
            </ul>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                We do not perform automated analytics for external marketing or profiling purposes
                beyond the core functionality of the job board.
            </p>
        </section>

        <!-- 4. Data Sharing and Disclosure -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                4. Data Sharing and Disclosure
            </h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                We do not sell your Personal Data. As an independent platform, we do not share your
                data with affiliates for marketing. We may disclose your data in the following
                limited circumstances:
            </p>
            <ul class="list-disc list-inside text-gray-700 dark:text-gray-300 ml-4 mb-4 space-y-2">
                <li>
                    <strong>Between Students and Companies:</strong> The core function of our
                    Platform is to connect Students and Companies. When a Student applies for a job,
                    their profile data (as designated by the Student) will be shared with the
                    Company.
                </li>
                <li>
                    <strong>Service Providers:</strong> We may share data with third-party vendors
                    who perform services on our behalf, such as cloud hosting, database management,
                    and technical support. These vendors are contractually obligated to protect your
                    data and use it only for the services we request.
                </li>
                <li>
                    <strong>Legal Requirements:</strong> We may disclose your data if required by
                    law, subpoena, or other legal process, or if we believe in good faith that
                    disclosure is necessary to protect our rights, your safety, or the safety of
                    others.
                </li>
            </ul>
        </section>

        <!-- 5. Data Retention -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                5. Data Retention
            </h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                We will retain your Personal Data only for as long as is necessary for the purposes
                set out in this Privacy Notice, or as long as your account is active. We will also
                retain data as necessary to comply with our legal obligations, resolve disputes, and
                enforce our agreements.
            </p>
        </section>

        <!-- 6. Your Data Protection Rights -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                6. Your Data Protection Rights
            </h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                In accordance with applicable data protection laws (such as the GDPR and Thai PDPA),
                you have the following rights regarding your Personal Data:
            </p>
            <ul class="list-disc list-inside text-gray-700 dark:text-gray-300 ml-4 mb-4 space-y-2">
                <li>
                    <strong>The Right to Access:</strong> You have the right to request copies of
                    your personal data.
                </li>
                <li>
                    <strong>The Right to Rectification:</strong> You have the right to request that
                    we correct any information you believe is inaccurate or complete information you
                    believe is incomplete.
                </li>
                <li>
                    <strong>The Right to Erasure:</strong> You have the right to request that we
                    erase your personal data, under certain conditions.
                </li>
                <li>
                    <strong>The Right to Restrict Processing:</strong> You have the right to request
                    that we restrict the processing of your personal data, under certain conditions.
                </li>
                <li>
                    <strong>The Right to Object to Processing:</strong> You have the right to object
                    to our processing of your personal data, under certain conditions.
                </li>
                <li>
                    <strong>The Right to Data Portability:</strong> You have the right to request
                    that we transfer the data that we have collected to another organization, or
                    directly to you, under certain conditions.
                </li>
                <li>
                    <strong>The Right to Withdraw Consent:</strong> If we are processing your data
                    based on your consent, you have the right to withdraw that consent at any time.
                </li>
            </ul>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                To exercise any of these rights, please contact us using the details below.
            </p>
        </section>

        <!-- 7. Changes to This Privacy Notice -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                7. Changes to This Privacy Notice
            </h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                We may update this Privacy Notice from time to time. We will notify you of any
                changes by posting the new Privacy Notice on this page and updating the "Last
                Updated" date at the top. We encourage you to review this Privacy Notice
                periodically for any changes.
            </p>
        </section>

        <!-- 8. Contact Us -->
        <section>
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4">8. Contact Us</h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-4">
                If you have any questions, concerns, or requests regarding this Privacy Notice or
                your Personal Data, please contact our Data Protection Officer (DPO) at:
            </p>
            <ul class="text-gray-700 dark:text-gray-300 ml-4 space-y-2">
                <li><strong>Address:</strong> [Your Company's Address]</li>
                <li>
                    <strong>Email:</strong> [Your DPO or Privacy Email, e.g.,
                    privacy@yourjobboard.com]
                </li>
                <li><strong>Phone:</strong> [Your Company Phone Number]</li>
            </ul>
            <div ref="endSentinel" aria-hidden="true" class="h-px w-full"></div>
        </section>
    </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onBeforeUnmount } from "vue";

const emit = defineEmits<{
    (e: "reached-end"): void;
}>();

const endSentinel = ref<HTMLElement | null>(null);
const hasEmitted = ref(false);
let observer: IntersectionObserver | null = null;

onMounted(() => {
    observer = new IntersectionObserver(
        (entries) => {
            const entry = entries[0];
            if (entry && entry.isIntersecting && !hasEmitted.value) {
                hasEmitted.value = true;
                emit("reached-end");
            }
        },
        {
            root: null,
            threshold: 1.0,
        }
    );
    if (endSentinel.value) {
        observer.observe(endSentinel.value);
    }
});

onBeforeUnmount(() => {
    if (observer) {
        observer.disconnect();
        observer = null;
    }
});
</script>
